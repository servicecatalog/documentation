<?xml version="1.0" encoding="UTF-8"?>  
<!-- Copyright FUJITSU ENABLING SOFTWARE TECHNOLOGY GMBH 2021 -->
<!DOCTYPE task PUBLIC "-//OASIS//DTD DITA Task//EN"
                      "task.dtd">
<task id="id_276">
  <title>Managing Tenants</title>
    <taskbody>
        <context>
            <p>When the platform is installed and operated in OIDC authentication mode, users are managed and authenticated by means of OpenID Connect in an external provider system such as Microsoft Azure Active Directory. Web-browser single sign-on (SSO) is supported; this means that a user once logged in and verified at the OIDC provider does not need to log in again to use different applications working with that same provider until he closes the browser session and/or logs out.</p>
            <p>A tenant on the platform represents a configuration with all the settings and parameters required to connect to a specific tenant at the OIDC provider, for example, a specific domain and directory in Microsoft Azure Active Directory. The first and default tenant is created when the platform is installed. </p>
            <p>Each organization and marketplace is assigned to a specific tenant when it is created. The initial operator organization is associated with the default tenant. Users trying to log in to a marketplace are authenticated by the OIDC provider of the tenant assigned to the marketplace. For access to the administration portal, the tenant to be used for authentication must be specified in the URL unless it is the default tenant.</p>
            <p>On the <uicontrol>Manage tenants</uicontrol> page, you can create and manage tenants. </p>
            <p><b>To create a tenant</b>:</p>
        </context>
        <steps>
            <step>
                <cmd>Take the required preparations at the OIDC provider system. For details, click <xref
                        href="../../Shared/reference/c_Preparation_OIDC_Provider.xml">here</xref>.</cmd>
                <info/>
            </step>
            <step>
                <cmd>On the <uicontrol>Manage tenants</uicontrol> page, click <uicontrol>Add</uicontrol>.</cmd>
                <info/>
            </step>
            <step>
                <cmd>Enter the following information: </cmd>
                <info>
                    <p>
                        <ul>
                            <li><uicontrol>Name</uicontrol> of the tenant, for example, indicating the OIDC provider associated with it. The tenant name must be unique on the platform. It may consist of a maximum of 255 alphanumeric characters.</li>
                            <li><uicontrol>Description</uicontrol> of the tenant. <ph
                                    id="The_length_of_the_short_descr_task_taskbody_steps_step_2"
                                    >The length of the description is restricted to 40 characters. </ph></li>
                        </ul>
                    </p>
                    <p>The unique identifier of the tenant is generated by the system and shown in the <uicontrol>ID</uicontrol> field</p>
                </info>
            </step>
            <step>
                <cmd>To save your entries, click <uicontrol>Save</uicontrol>.</cmd>
            </step>
            <step>
                <cmd>Click <uicontrol>Download template</uicontrol> to obtain a template of the configuration file for the new tenant.</cmd>
                <info>For details on tenant configuration files, click <xref
                        href="../../Shared/reference/r_ConfigSettings_OIDC_Tenant.xml">here</xref>
                </info>
            </step>
            <step>
                <cmd>Fill in the configuration file and store it on the Docker host where the platform is deployed:</cmd>
                <info>
                    <p><codeph>&lt;docker>/config/oscm-identity/tenants/tenant-&lt;id>.properties</codeph></p>
                    <p><codeph>&lt;docker></codeph> is the platform's data directory specified at installation time. <codeph>&lt;id></codeph> is the ID of the tenant you created.</p>
                </info>
            </step>
        </steps>
        <result>
            <p>You as the platform operator are responsible for the correct configuration of tenants! </p>
            <p>If you create a tenant with an invalid configuration, the tenant will still be available for selection when an organization or marketplace is created. In this case, no user will be able to log in. </p>
            <p><b>To update a tenant</b>: </p>
            <ol compact="no">
                <li>From the tenants list, select the tenant whose data you want to edit. </li>
                <li>Update the name and/or the description. You cannot change the tenant ID.</li>
                <li>To save your entries, click <uicontrol>Save</uicontrol>.</li>
            </ol>
            <p>In order to change the tenant configuration, you need to edit the corresponding file on the Docker host where the platform is deployed:</p>
            <p><codeph>&lt;docker>/config/oscm-identity/tenants/tenant-&lt;id>.properties</codeph></p>
            <p><b>To delete a tenant</b>: </p>
            <ol compact="no">
                <li>From the tenants list, select the tenant you want to delete.  <p>You can only delete tenants which have not been assigned to any organization or marketplace. </p></li>
                <li>Click <uicontrol>Delete</uicontrol> and confirm the deletion.</li>
                <li>Delete the tenant configuration file on the Docker host: <p><codeph>&lt;docker>/config/oscm-identity/tenants/tenant-&lt;id>.properties</codeph></p></li>
            </ol>
        </result>
    </taskbody>
</task>
